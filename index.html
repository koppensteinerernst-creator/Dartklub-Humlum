// pages/index.js
import Head from "next/head";
import { useState, useEffect } from "react";

/* =========================
   CENTRALT INDHOLD (CONTENT)
   — alt kan redigeres her —
========================= */
const CONTENT = {
  site: {
    title: "Humlum Dartklub",
    motto: "Fællesskab & Præcision",
    tagline: "Dart for hele familien – begyndere til elite",
    contactEmail: "kontakt@humlumdartklub.dk",
    phone: "+45 12 34 56 78",
    address: "Struer/Humlum – Klublokale v. Hallen",
  },
  hero: {
    dynamicLines: [
      "Lær dart med trygge familiehold",
      "Træning på tværs af niveauer",
      "Faste events – alle kan være med",
      "Mentorordning for nye spillere",
    ],
    cta: { label: "Tilmeld introaften", href: "#signup" },
    secondary: { label: "Se træningsplan", href: "#training" },
  },
  ticker: {
    items: [
      { t: "180!", d: "Ernst rammer triple 20 ×3 i aftenens træning" },
      { t: "Checkout 132", d: "Lina lukker 25, T19, D25" },
      { t: "PDC Watch", d: "Lørdag 19:30 – fælles viewing i klubben" },
    ],
  },
  trainings: [
    { level: "Familiehold (8+)", when: "Tirsdag 17:00–18:00", note: "Forælder + barn" },
    { level: "Begynder", when: "Mandag 18:00–19:00", note: "Regler, stance, scoringsark" },
    { level: "Øvet", when: "Onsdag 19:00–20:30", note: "Doubles, finish routes" },
    { level: "Elite", when: "Torsdag 20:30–22:00", note: "501, sets/legs, mental fokus" },
  ],
  events: [
    { title: "Familie-lørdag", date: "2025-10-25", type: "Familie", desc: "Hygge, intro og små konkurrencer" },
    { title: "Ungdomscup", date: "2025-11-02", type: "Ungdom", desc: "U11/U15 – præmier og is" },
    { title: "Klubturnering #7", date: "2025-11-09", type: "Voksne", desc: "A/B-række – Swiss format" },
    { title: "Åben træning", date: "2025-10-28", type: "Alle", desc: "Kom og prøv – lån pile i klubben" },
  ],
};

/* =========================
   SMÅ UI-KOMPONENTER
========================= */
const Container = ({ children, wide }) => (
  <div className="container">
    {children}
    <style jsx>{`
      .container { max-width: ${wide ? "1100px" : "920px"}; margin: 0 auto; padding: 20px; }
    `}</style>
  </div>
);

const Button = ({ href = "#", onClick, children, variant = "primary" }) => (
  <a href={href} onClick={onClick} className={`btn ${variant}`}>
    {children}
    <style jsx>{`
      .btn { display:inline-block; padding:10px 16px; border-radius:10px; text-decoration:none; font-weight:600; }
      .primary { background:#0b5; color:white; }
      .ghost { background:transparent; border:2px solid #0b5; color:#0b5; }
      .btn:hover { opacity:0.9; }
    `}</style>
  </a>
);

const Badge = ({ children }) => (
  <span className="badge">
    {children}
    <style jsx>{`
      .badge { background:#eef7f1; color:#0b5; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:600; }
    `}</style>
  </span>
);

const Card = ({ children }) => (
  <div className="card">
    {children}
    <style jsx>{`
      .card { background:white; border:1px solid #eee; border-radius:16px; padding:16px; box-shadow:0 2px 12px rgba(0,0,0,0.04); }
    `}</style>
  </div>
);

/* =========================
   LIVE TICKER (hjørne-widget)
========================= */
const LiveTicker = ({ items }) => {
  const [open, setOpen] = useState(false);
  return (
    <>
      <div className="liveWidget" onClick={() => setOpen(!open)} role="button" aria-label="Live ticker">
        <span className="dot" /> Live nu
      </div>
      {open && (
        <div className="panel">
          <h4>Live opdateringer</h4>
          <ul>
            {items.map((x, i) => (
              <li key={i}><strong>{x.t}</strong> — {x.d}</li>
            ))}
          </ul>
        </div>
      )}
      <style jsx>{`
        .liveWidget { position:fixed; top:14px; right:14px; background:#111; color:#fff; padding:8px 12px; border-radius:999px; font-weight:700; cursor:pointer; z-index:50; }
        .dot { width:8px; height:8px; border-radius:50%; background:#0f0; display:inline-block; margin-right:8px; box-shadow:0 0 10px #0f0; }
        .panel { position:fixed; top:56px; right:14px; width:320px; max-height:60vh; overflow:auto; background:white; border:1px solid #eee; border-radius:16px; padding:14px; z-index:49; box-shadow:0 6px 24px rgba(0,0,0,0.15); }
        h4 { margin:4px 0 8px; }
        li { margin:8px 0; }
      `}</style>
    </>
  );
};

/* =========================
   HJÆLPE-KOMPONENTER
========================= */
const SectionTitle = ({ title, subtitle, id }) => (
  <div id={id} style={{ margin: "8px 0 10px" }}>
    <h2 style={{ margin: "0 0 2px", fontSize: 28 }}>{title}</h2>
    {subtitle && <p style={{ color: "#567" }}>{subtitle}</p>}
  </div>
);

const RotatingLines = ({ lines, interval = 3000 }) => {
  const [i, setI] = useState(0);
  useEffect(() => {
    const id = setInterval(() => setI(v => (v + 1) % lines.length), interval);
    return () => clearInterval(id);
  }, [lines, interval]);
  return <p style={{ fontStyle: "italic", color: "#234" }}>{lines[i]}</p>;
};

const HeroStat = ({ label, value }) => (
  <Card>
    <div style={{ textAlign: "center" }}>
      <div style={{ fontSize: 24, fontWeight: 800 }}>{value}</div>
      <div style={{ color: "#567" }}>{label}</div>
    </div>
  </Card>
);

const th = { textAlign: "left", padding: "10px 8px", borderBottom: "1px solid #eee", color: "#345" };
const td = { padding: "10px 8px", borderBottom: "1px solid #f3f3f3" };

const TrainingTable = ({ rows }) => (
  <Card>
    <table style={{ width: "100%", borderCollapse: "collapse" }}>
      <thead>
        <tr>
          <th style={th}>Hold</th>
          <th style={th}>Tid</th>
          <th style={th}>Note</th>
        </tr>
      </thead>
      <tbody>
        {rows.map((r, i) => (
          <tr key={i}>
            <td style={td}>{r.level}</td>
            <td style={td}>{r.when}</td>
            <td style={td}>{r.note}</td>
          </tr>
        ))}
      </tbody>
    </table>
  </Card>
);

const EventsForAll = ({ items }) => {
  const [filter, setFilter] = useState("Alle");
  const categories = ["Alle", "Familie", "Ungdom", "Voksne"];
  const list = items.filter(e => (filter === "Alle" ? true : e.type === filter));
  return (
    <>
      <div style={{ display: "flex", gap: 8, flexWrap: "wrap", margin: "6px 0 12px" }}>
        {categories.map(c => (
          <button key={c} onClick={() => setFilter(c)} className={`pill ${filter === c ? "active" : ""}`}>{c}</button>
        ))}
      </div>
      <div className="grid">
        {list.map((e, i) => (
          <Card key={i}>
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "baseline" }}>
              <h3 style={{ margin: 0 }}>{e.title}</h3>
              <Badge>{e.type}</Badge>
            </div>
            <p style={{ margin: "6px 0 0", color: "#456" }}>{e.desc}</p>
            <p style={{ margin: "6px 0 0" }}><strong>{fmtDate(e.date)}</strong></p>
          </Card>
        ))}
      </div>
      <style jsx>{`
        .grid { display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px; }
        @media (max-width:800px){ .grid { grid-template-columns:1fr; } }
        .pill { border:1px solid #0b5; background:#fff; color:#0b5; padding:6px 10px; border-radius:999px; font-weight:700; cursor:pointer; }
        .pill.active { background:#0b5; color:#fff; }
      `}</style>
    </>
  );
};

const FamilyHousehold = () => (
  <Card>
    <ul style={{ margin: "0 0 0 16px" }}>
      <li>Tryg intro for hele husstanden – lån pile i klubben</li>
      <li>Forælder-barn træning med trænere til stede</li>
      <li>Klubkodeks: respekt, sikkerhed og spilleglæde</li>
      <li>Kaffe/saft-hjørne – pauser er også fællesskab</li>
      <li>Mulighed for familie-medlemskab og rabat</li>
    </ul>
  </Card>
);

const SignupForm = () => {
  const onSubmit = (e) => {
    e.preventDefault();
    alert("Tak! Vi vender tilbage i dag – tjek også din e-mail.");
  };
  return (
    <Card>
      <form onSubmit={onSubmit} style={{ display: "grid", gap: 10 }}>
        <div style={{ display: "grid", gap: 8 }}>
          <label>Navn<input required name="name" className="in" placeholder="Fornavn og efternavn" /></label>
          <label>E-mail<input required type="email" name="email" className="in" placeholder="din@mail.dk" /></label>
          <label>Husstand<select name="household" className="in">
            <option>Enkelt</option>
            <option>Par</option>
            <option>Familie (forælder + barn/børn)</option>
          </select></label>
          <label>Niveau<select name="level" className="in">
            <option>Begynder</option>
            <option>Øvet</option>
            <option>Elite</option>
            <option>Ikke sikker endnu</option>
          </select></label>
          <label>Besked<textarea name="msg" className="in" rows={4} placeholder="Fortæl kort om jer – så matcher vi et hold" /></label>
        </div>
        <div><button className="submit">Send</button></div>
      </form>
      <style jsx>{`
        label { display:grid; gap:6px; font-weight:600; color:#234; }
        .in { padding:10px 12px; border:1px solid #dde3ea; border-radius:10px; font-size:15px; }
        .submit { background:#0b5; color:#fff; font-weight:800; padding:12px 16px; border:none; border-radius:12px; cursor:pointer; }
        .submit:hover{ opacity:0.9; }
      `}</style>
    </Card>
  );
};

function fmtDate(s){
  try {
    const d = new Date(s + "T00:00:00");
    return d.toLocaleDateString("da-DK", { weekday:"short", day:"2-digit", month:"short" });
  } catch { return s; }
}

/* =========================
   SELVE SIDEN
========================= */
export default function Home() {
  return (
    <>
      <Head>
        <title>{CONTENT.site.title} – {CONTENT.site.motto}</title>
        <meta name="description" content={CONTENT.site.tagline} />
      </Head>

      <LiveTicker items={CONTENT.ticker.items} />

      <header className="hero">
        <Container wide>
          <div className="topRow">
            <div className="left">
              <Badge>{CONTENT.site.motto}</Badge>
              <h1>{CONTENT.site.title}</h1>
              <p className="tag">{CONTENT.site.tagline}</p>
              <RotatingLines lines={CONTENT.hero.dynamicLines} />
              <div className="cta">
                <Button href={CONTENT.hero.cta.href}>{CONTENT.hero.cta.label}</Button>
                <Button href={CONTENT.hero.secondary.href} variant="ghost">{CONTENT.hero.secondary.label}</Button>
              </div>
            </div>
            <div className="right">
              <HeroStat label="Medlemmer" value="42" />
              <HeroStat label="Baner" value="6" />
              <HeroStat label="Åben dage/uge" value="4" />
            </div>
          </div>
        </Container>
        <style jsx>{`
          .hero { background:linear-gradient(180deg,#f6fbff, #fff); padding:40px 0 10px; border-bottom:1px solid #eef3f7; }
          .topRow { display:flex; gap:24px; align-items:flex-start; }
          .left { flex:1; }
          .right { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
          h1 { margin:12px 0 6px; font-size:44px; }
          .tag { color:#456; margin-bottom:10px; }
          .cta { margin-top:10px; display:flex; gap:10px; flex-wrap:wrap; }
          @media (max-width:800px){ .topRow{flex-direction:column;} .right{grid-template-columns:repeat(3, minmax(0,1fr));} }
        `}</style>
      </header>

      <main>
        <Container>
          <SectionTitle title="Træning for alle niveauer" subtitle="Familier, begyndere, øvede og elite" id="training" />
          <TrainingTable rows={CONTENT.trainings} />
        </Container>

        <Container>
          <SectionTitle title="Events for alle" subtitle="Filtrér efter målgruppe" />
          <EventsForAll items={CONTENT.events} />
        </Container>

        <Container>
          <SectionTitle title="Familie & Husstand" subtitle="Trygge rammer, tydelige regler og hygge" />
          <FamilyHousehold />
        </Container>

        <Container>
          <SectionTitle title="Bliv medlem" subtitle="Udfyld – vi vender tilbage samme dag" id="signup" />
          <SignupForm />
        </Container>

        <Container>
          <SectionTitle title="Sponsorer" subtitle="Se pakker og fordele" />
          <Card>
            <p>Støt klubben og bliv synlig i lokalsamfundet.</p>
            <div style={{marginTop:12}}>
              <Button href="/sponsor">Gå til sponsorpakker</Button>
            </div>
          </Card>
        </Container>
      </main>

      <footer>
        <Container>
          <div className="foot">
            <div>
              <strong>{CONTENT.site.title}</strong><br/>
              {CONTENT.site.address}
            </div>
            <div>
              <a href={`mailto:${CONTENT.site.contactEmail}`}>{CONTENT.site.contactEmail}</a><br/>
              <a href={`tel:${CONTENT.site.phone}`}>{CONTENT.site.phone}</a>
            </div>
            <div>
              <small>© {new Date().getFullYear()} – {CONTENT.site.motto}</small>
            </div>
          </div>
        </Container>
        <style jsx>{`
          footer { border-top:1px solid #eee; background:#fafafa; padding:20px 0; }
          .foot { display:grid; grid-template-columns:1.2fr 1fr 1fr; gap:16px; }
          @media (max-width:800px){ .foot{grid-template-columns:1fr; } }
        `}</style>
      </footer>
    </>
  );
}

/* =========================
   BONUS: Sponsor-side skabelon (kopiér til /pages/sponsor.js)
   --- START KOPI ---
import Head from "next/head";
export default function SponsorPage(){
  const tiers = [
    {
      name: "Bronze",
      price: "DKK 2.500/år",
      perks: [
        "Logo på hjemmeside (sponsorvæg)",
        "Tak på Facebook/Instagram",
        "Klubcertifikat til butik/kontor",
      ],
    },
    {
      name: "Sølv",
      price: "DKK 5.000/år",
      perks: [
        "Alt i Bronze",
        "Logo på event-rollup i hallen",
        "Sponsoromtale ved events (speak)",
      ],
    },
    {
      name: "Guld",
      price: "DKK 10.000/år",
      perks: [
        "Alt i Sølv",
        "Logo på træningstrøjer (ærme)",
        "Årlig firma-dart aften (2 timer)",
      ],
    },
  ];
  return (
    <>
      <Head><title>Sponsorpakker – Humlum Dartklub</title></Head>
      <div style={{maxWidth:920, margin:"0 auto", padding:20}}>
        <h1 style={{margin:"0 0 6px"}}>Sponsorpakker</h1>
        <p style={{color:"#456"}}>
          Støt lokal forening og få synlighed i et aktivt fællesskab. Vælg en pakke – eller lad os skræddersy.
        </p>
        <div style={{ display:"grid", gridTemplateColumns:"repeat(3, minmax(0, 1fr))", gap:12, margin:"12px 0" }}>
          {tiers.map((t, i) => (
            <div key={i} style={{background:"#fff", border:"1px solid #eee", borderRadius:16, padding:16, boxShadow:"0 2px 12px rgba(0,0,0,0.04)"}}>
              <h2 style={{margin:"0 0 6px"}}>{t.name}</h2>
              <p><strong>{t.price}</strong></p>
              <ul style={{margin:"8px 0 0 18px"}}>
                {t.perks.map((p, j) => <li key={j}>{p}</li>)}
              </ul>
              <div style={{marginTop:12}}>
                <a href={"mailto:kontakt@humlumdartklub.dk?subject=Sponsor%20" + t.name}
                   style={{display:"inline-block", padding:"10px 16px", borderRadius:10, background:"#0b5", color:"#fff", fontWeight:600, textDecoration:"none"}}>
                  Kontakt os
                </a>
              </div>
            </div>
          ))}
        </div>
        <div style={{background:"#fff", border:"1px solid #eee", borderRadius:16, padding:16}}>
          <p style={{margin:0}}>Skriv til os for tilbud og plads på næste trykrunde.</p>
        </div>
      </div>
    </>
  );
}
   --- SLUT KOPI ---
========================= */
